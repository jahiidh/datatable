/*!
  * DataTable v1.0.3 (https://getbootstrap.com/)
  * Copyright 2023, Author (https://github.com/jahiidh)
  * Licensed under MIT (https://github.com/jahiidh/datatable/LICENSE)
  */
class DataTable{constructor(t,e={}){let a=this;a.s=t,a.d=e.data??!1,a.c=e.content??!1,a.col=e.columns??!1,a.hx=e.hideExtra??!1,a.stk=e.sticky??!1,a.cat=e.categories??!1,a.srt=e.sort??!1,a.srtc=e.sort_columns??!1,a.srch=e.search??!1,a.pgn=e.pagination??!1,a.pgnb=e.pagination_buttons??!1,a.lmt=e.limit??!1,a.cds=e.catDesign??!1,a.clmt=e.current_limit??!1,a.tc=e.themeClass??"initial",a.so=e.search_on??!1,a.sh=e.search_heighlight??!1,a.th={},a.h()}mn=t=>{var e;let a=document.createRange().createContextualFragment(t).firstChild;for(;null!=a&&3==a.nodeType;)a=a.nextSibling;return a};pg(t,e,a){if(a<=t&&t>1){let l=Math.floor(e/2);e>t&&(e=t);let s=1;a-l>0&&(s=a-l);let r,o=[];for(r=s+e>t&&t-e+1>1?(s=t-e+1)+e:s+e;s<r;s++)s<=t&&o.push(s);return(o=o[0]>1?[a-1,"s",...o]:[a-1,...o])[o.length-1]<t?[...o,"e",parseInt(a)+1]:[...o,parseInt(a)+1]}}qa(t,e,a=document){a.querySelectorAll(t).forEach((t,a)=>e(t,a))}clck=t=>{window.addEventListener("click",e=>{let a=this;a.qa(".dt-body",(l,s)=>{a.qa(t,(t,a)=>{if(e.target==t||t.contains(e.target))return t},l)})})};fev(){document;let t=this;window.addEventListener("click",e=>{t.qa(".dt-body .dt-sortable",(a,l)=>{(e.target==a||a.contains(e.target))&&t.qa(".dt-sortable",(e,l)=>{a==e?e.classList.contains("sorted")?(e.classList.remove("sorted"),t.dtsrt(e.closest(".dt-body"),l,"asc")):(e.classList.add("sorted"),t.dtsrt(e.closest(".dt-body"),l,"desc")):e.classList.remove("sorted")},a.closest("tr"))}),t.qa(".dt-body .dt-pagination-btn",(a,l)=>{if((e.target==a||a.contains(e.target))&&a.hasAttribute("data")){let s=a.closest(".dt-body"),r=s.querySelectorAll("tbody tr"),o=a.getAttribute("data");s.querySelector(".dt-limit")?t.clmt=s.querySelector(".dt-limit").value:t.clmt=s.querySelectorAll("tbody tr").length;let c=t.pgmk(r.length,o);t.clmt=s.querySelector(".dt-limit").value,s.querySelector(".dt-pagination").outerHTML=c;let i=s.querySelector(".dt-table tbody");t.qa("tr",(e,a)=>{(o-1)*t.clmt<=a&&a<o*t.clmt?e.classList.remove("d-none"):e.classList.add("d-none")},i),s.querySelector(".dt-info-start").innerText=0==r.length?0:(o-1)*t.clmt+1,s.querySelector(".dt-info-end").innerText=r.length<o*t.clmt?r.length:o*t.clmt,s.querySelector(".dt-info-total").innerText=r.length}}),t.qa(".dt-body .dt-catbutton",(a,l)=>{if(e.target==a||a.contains(e.target)){let s=a.getAttribute("value");a=a.closest(".dt-category"),t.qa(".dt-catbutton",(t,e)=>{t.getAttribute("value")===s?t.classList.add("active"):t.classList.remove("active")});let r=t.dtcs(a.getAttribute("data-column"),a.getAttribute("data-name"),s,a.closest(".dt-body"));a.closest(".dt-body").querySelector("tbody").replaceWith(r)}})}),window.addEventListener("input",e=>{t.qa(".dt-body .dt-category",(a,l)=>{if(e.target==a||a.contains(e.target)){let s=t.dtcs(a.getAttribute("data-column"),a.name,a.value,a.closest(".dt-body"));a.closest(".dt-body").querySelector("tbody").replaceWith(s)}}),t.qa(".dt-body .dt-search input",(a,l)=>{if(e.target==a||a.contains(e.target)){let s=t.dtcs("search","dt-default-search",a.value,a.closest(".dt-body"));a.closest(".dt-body").querySelector("tbody").replaceWith(s)}}),t.qa(".dt-body .dt-limit",(a,l)=>{(e.target==a||a.contains(e.target))&&t.dtlmt(a.closest(".dt-body"))})})}dtlmt=t=>{let e=this,a=t.querySelector(".dt-limit").value,l=document.createElement("tbody"),s=!1,r=0,o=0;e.qa("tbody tr",(t,e)=>{t.classList.contains("d-none")||(s=!0),s&&r++<a?t.classList.remove("d-none"):t.classList.add("d-none"),!t.hasAttribute("hidetype")&&o++,l.append(t)},t),e.clmt=a,e.pgmk(o,1,t),t.querySelector("tbody").replaceWith(l)};eva=t=>Array.isArray(t)?t.flatMap(t=>this.eva(t)):"object"==typeof t&&null!==t?Object.values(t).flatMap(t=>this.eva(t)):[t];dtcs=(t,e,a,l)=>{let s=this,r,o,c=!1,i=t.match(/\{column\[(\d+)\](.*)\}/);if(i){if(r=parseInt(i[1])+1,""!==i[2]&&i[2].match(/ attr\[(.*)\]/)){let n=i[2].match(/ attr\[(.*)\]/);o=i[2].replaceAll(n[0],""),c=n[1].replaceAll(/^['"]|['"]$/g,"")}else o=i[2]}let d=document.createElement("tbody"),h=0,u=1;if(l.querySelector(".dt-limit")?s.clmt=l.querySelector(".dt-limit").value:s.clmt=l.querySelectorAll("tbody tr").length,s.qa("tbody tr",(t,l)=>{let i=!1,n=[];if("dt-default-search"===e)s.qa("td",(t,e)=>{let l=s.so,r=[];if((!l||Array.isArray(l)&&0===l.length||"object"==typeof l&&0===Object.keys(l).length)&&(l="column"),l){let o;"string"==typeof l?r.push(l):l.constructor==Array?(1===l.length?o=l:l[e]&&(o=s.eva(l[e])),r=[...r,...o]):"object"==typeof l&&(l["*"]&&(o=s.eva(l["*"])),l[e]&&(o=s.eva(l[e])),r=[...r,...o]),""!==a?((r.includes("strict")&&r.includes("column")||!r.includes("strict"))&&(t.innerText.toLowerCase().match(a)?(s.sh&&t.classList.add("dt-search-highlight"),i=!0):t.classList.remove("dt-search-highlight")),r.forEach((e,l)=>{e.includes(["strict","column"])||(t.hasAttribute(e)&&(t.getAttribute(e).match(a)?(s.sh&&t.classList.add("dt-search-highlight"),i=!0):t.classList.remove("dt-search-highlight")),s.qa("["+e+"]",(t,l)=>{t.hasAttribute(e)&&(t.getAttribute(e).match(a)?(s.sh&&t.classList.add("dt-search-highlight"),i=!0):t.classList.remove("dt-search-highlight"))},t))})):(i=!0,t.classList.remove("dt-search-highlight"))}},t);else{let u=t.querySelector("td:nth-child("+r+")"+o),m;u?c?u.getAttribute(c)?m=u.getAttribute(c).toLowerCase():u.querySelector("["+c+"]")&&(m=u.querySelector("["+c+"]").getAttribute(c).toLowerCase()):m=u.innerText.toLowerCase():m="",i=m===a.toLowerCase()||""===a}if(t.hasAttribute("hidetype")){let p=t.getAttribute("hidetype").split(",");n=p=p.map(t=>t.trim())}i?n.includes(e)&&n.splice(parseInt(n.indexOf(e)),1):n.includes(e)||n.push(e),n.length>0?t.setAttribute("hidetype",n.join(", ")):(t.removeAttribute("hidetype"),h++),s.clmt>=h?t.classList.remove("d-none"):t.classList.add("d-none"),d.appendChild(t)},l),0===h&&0!==d.querySelectorAll(".dt-norow").length||0===h){if(0==d.querySelectorAll(".dt-norow").length){let m=document.createElement("tr");m.innerHTML='<td colspan="100">No Result found.</td>',m.classList.add("dt-norow"),d.appendChild(m)}else d.querySelector(".dt-norow").classList.remove("d-none"),d.querySelector(".dt-norow").removeAttribute("hidetype")}else d.querySelector(".dt-norow")?.remove();return s.pgmk(h,u,l),d};pgmk=(t,e,a)=>{let l=this;t.length&&(t=t.length);let s=!1!==l.pgnb?l.pgnb:5,r=Math.ceil(t/(l.clmt??t)),o=l.pg(r,s,e),c='<div class="dt-pagination">';if(o){let i=o[0],n=o[o.length-1];o.splice(-1),o.splice(0,1),c+=`<button class="dt-pagination-btn" ${i>0?'data="'+i+'"':"disabled"} >Prev</button>`,o.forEach(t=>{"s"==t?c+='<button class="dt-pagination-btn" data="1">1</button>':"e"==t?c+=`<button class="dt-pagination-btn" data="${r}">${r}</button>`:c+=`<button class="dt-pagination-btn ${t==e?"active":""}" data="${t}">${t}</button>`}),c+=`<button class="dt-pagination-btn" ${n-1<r?'data="'+n+'"':"disabled"} >Next</button>`}else c+='<button class="dt-pagination-btn" disabled>Prev</button>',c+='<button class="dt-pagination-btn active" data="1">1</button>',c+='<button class="dt-pagination-btn" disabled>Next</button>';return c+="</div>",a&&a.querySelector(".dt-pagination")&&(a.querySelector(".dt-pagination").outerHTML=c,a.querySelector(".dt-info-total").innerText=t,a.querySelector(".dt-info-start").innerText=0==t?0:(e-1)*l.clmt+1,a.querySelector(".dt-info-end").innerText=t<e*l.clmt?t:e*l.clmt),c};dtsrt=(t,e,a)=>{let l=this;l.clmt=t.querySelector(".dt-limit").value;let s=t.querySelector(".dt-table tbody"),r=Array.from(s.rows),o="asc"==a?1:-1;r.sort((t,a)=>{let l=t.cells[e].textContent.trim(),s=a.cells[e].textContent.trim();return o*l.localeCompare(s)});var c=document.createElement("tbody");let i=0;for(let n of r)l.clmt>i?n.classList.remove("d-none"):n.classList.add("d-none"),c.appendChild(n),!n.hasAttribute("hidetype")&&i++;l.pgmk(i,1,t),s.replaceWith(c)};catm=(t,e)=>{let a=t.placeholder.toLowerCase().replaceAll(" ",""),l=a,s=1,r=this,o=[],c;for(r.tempcatnames||(r.tempcatnames=[]);r.tempcatnames.includes(a);)a=l+s++;if(r.tempcatnames.push(a),t.type&&"button"==t.type){c=`<div data-name="${a}" data-column="${t.column}" class="dt-category"><button class="dt-catbutton active" value="">All</button>`;let i=t.data,n=[...i.matchAll(/{data\[(\d+)\]\.value}/g)];n.forEach(t=>{e.forEach((e,a)=>{e[t[1]].split(",").forEach(t=>{o.includes(t)||(c+=`<button class="dt-catbutton" value="${t}">${t}</button>`,o.push(t))})})}),c+="</div>"}else{c=`<select name="${a}" data-column="${t.column}" class="dt-category"><option value="">${t.placeholder}</option>`;let d=t.data,h=[...d.matchAll(/{data\[(\d+)\]\.value}/g)];h.forEach(t=>{e.forEach((e,a)=>{e[t[1]].split(",").forEach(t=>{o.includes(t)||(c+=`<option value="${t}">${t}</option>`,o.push(t))})})}),c+="</select>"}return c};svgs={arrow:'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 512 512" class="caret-down-alt"><path d="M98,190.06,237.78,353.18a24,24,0,0,0,36.44,0L414,190.06c13.34-15.57,2.28-39.62-18.22-39.62H116.18C95.68,150.44,84.62,174.49,98,190.06Z"></path></svg>'};gfc(t,e){let a=document,l=this,s=this.s,r,o=l.mn(t);if(l.d&&!1==l.c||l.d&&l.c&&"data"==l.c)r=l.d;else if(l.tempd)r=l.tempd;else{console.error("Code are changed. Plaese restore the library again.");return}l.qa("tbody tr",(t,e)=>{l.clmt&&e+1>l.clmt&&t.classList.add("d-none"),l.qa("td",(t,a)=>{let s=l.th[a];if(""!==s&&void 0!==s){s=s.replaceAll("{data.value}",t.innerHTML);let o=[...s.matchAll(/{data\[(\d+)\]\.value}/g)];o.forEach(t=>{s=s.replaceAll(t[0],r[e][t[1]])}),t.innerHTML=s}},t)},o),o.classList.add("dt-table",l.tc),l.stk&&o.classList.add("dt-sticky"),l.n=o;let c="",i="",n="",d="";if(l.lmt){if(c+='<select class="dt-limit" name="dt_limit" >',l.lmt.constructor==Array)l.lmt.forEach(t=>{c+=`<option value="${t}" ${t==l.clmt?"selected":""}>${t}</option>`});else if("object"==typeof l.lmt)for(let h in l.lmt)"active"==h&&!1===l.clmt?(c+=`<option value="${l.lmt[h]}" selcted>${l.lmt[h]}</option>`,l.clmt=l.lmt[h]):c+=`<option value="${l.lmt[h]}" ${l.lmt[h]==l.clmt?"selcted":""}>${l.lmt[h]}</option>`;c+="</select>"}l.cat&&("array"==typeof l.cat||l.cat.constructor==Array?l.cat.forEach((t,e)=>{c+=l.catm(t,r)}):"object"==typeof l.cat&&(c+=l.catm(l.cat,r))),l.srch&&(i+='<div class="dt-search"><input type="text" placeholder="Search" /></div>'),l.srt&&l.qa("thead th",(t,e)=>{l.srtc&&l.srtc.constructor==Array?l.srtc.includes(e)&&(l.n.querySelectorAll("thead th")[e].innerHTML=`<span class="dt-sortable">${t.innerHTML}<span>${l.svgs.arrow}</span></span>`):l.n.querySelectorAll("thead th")[e].innerHTML=`<span class="dt-sortable">${t.innerHTML}<span>${l.svgs.arrow}</span></span>`},l.n),l.pgn&&(n=l.pgmk(r,1)),d+='<div class="dt-info">Showing <span class="dt-info-start">1</span> to <span class="dt-info-end">',l.clmt?(l.clmt>r.length?d+=r.length:d+=l.clmt,d+='</span> of <span class="dt-info-total">'):d+=`${r.length}</span> of <span class="dt-info-total">`,d+=`${r.length}</span> entries</div>`;var u=a.createElement("div");if(l.d&&l.c&&"data"==l.c||l.d&&!1===l.c)for(let m of a.querySelectorAll(s)[e].attributes)u.setAttribute(m.name,m.value);u.classList.add("dt-body"),u.innerHTML=`<div class="dt-header"> <div class="d-flex"> <div class="dt-filter"> ${c}</div>${i}</div></div>${l.n.outerHTML}<div class="dt-footer"> <div class="d-flex"> ${d}${n}</div></div>`,a.querySelectorAll(s)[e].replaceWith(u)}gt(){document;let t=this,e=this.s,a="",l=t.col;if(t.d&&!1===t.c||t.c&&"data"==t.c&&t.d){if(a+="<table><thead><tr>",!1==l&&(l=t.d[0]),l&&("array"==typeof l||l.constructor==Array))l.forEach((t,e)=>{"object"==typeof t?(t.title?a+=`<th>${t.title}</th>`:a+=`<th>${e+1}</th>`,t.html?this.th[e]=t.html:this.th[e]=""):["string","number"].includes(typeof t)?(""==t&&(t="Col "+(e+1)),a+=`<th>${t}</th>`,this.th[e]=""):"array"==typeof t?(t[0]&&(a+=`<th>${t[0]}</th>`),t[1]?this.th[e]=t.html:this.th[e]=""):console.error("Columns type mismatch. Read the documentation again.")});else if(l&&"object"==typeof l)for(let s in l)["string","number"].includes(typeof l[s])?(a+=`<th>${l[s]}</th>`,t.th[s]=""):"array"==typeof l[s]?l[s][1]?(a+=`<th>${l[s][0]}</th>`,t.th[s]=l[s][1]):l[s][0]?(a+=`<th>${l[s][0]}</th>`,t.th[s]=""):(a+=`<th>Col ${s+1}</th>`,t.th[s]=""):"object"==typeof l[s]?(l[s].title?a+=`<th>${l[s].title}</th>`:a+=`<th>Col ${s+1}</th>`,l[s].html?t.th[s]=l[s].html:t.th[s]=""):console.error("columns item must be object and key name must be html");a+="</tr></thead><tbody>",t.d.forEach((e,l)=>{"string"==typeof e||["string","number"].includes(typeof e)?e=[e]:"object"==typeof e&&e.constructor!==Array&&console.error("Data type must be array"),a+="<tr>",e.forEach((e,l)=>{l<Object.keys(t.th).length?a+=`<td>${e}</td>`:t.hx&&(a+=`<td class="d-none">${e}</td>`)}),a+="</tr>"}),a+="</tbody></table>",t.qa(e,(e,l)=>{t.gfc(a,l)})}else if(t.c&&"table"==t.c||!1===t.d){let r=0;t.qa(e,(e,a)=>{if("table"===e.tagName.toLowerCase()){if(r++,l&&"array"==typeof l)l.forEach((t,a)=>{"object"==typeof t?(t.title&&(e.querySelectorAll("th")[a].innerHTML=t.title),t.html?this.th[a]=t.html:this.th[a]=""):["string","number"].includes(typeof t)?this.th[a]=t:"array"==typeof t?(t[1]&&(e.querySelectorAll("th")[a].innerHTML=t[0],this.th[a]=t[1]),t[0]?this.th[a]=t[0]:this.th[a]=""):this.th[a]=""});else if(l&&"object"==typeof l)for(let s in l)["string","number"].includes(typeof l[s])?t.th[s]=l[s]:"array"==typeof l[s]?l[s][1]?(e.querySelectorAll("th")[s].innerHTML=l[s][0],t.th[s]=l[s][0]):l[s][0]?t.th[s]=l[s][0]:t.th[s]="":"object"==typeof l[s]?(l[s].title&&(e.querySelectorAll("th")[s].innerHTML=l[s].title),l[s].html?t.th[s]=l[s].html:t.th[s]=""):t.th[s]="";t.tempd=[],t.qa("tbody tr",(e,a)=>{let l=[];t.qa("td",(t,e)=>{l.push(t.innerHTML)},e),t.tempd.push(l)},e),t.gfc(e.outerHTML,a)}}),0==r&&console.error("No Table found.")}}h=()=>{this.gt(),this.qa(this.s,t=>{t.style.display=null}),this.fev()}}