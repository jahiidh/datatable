/*!
 * DataTable v1.0.3 (https://getbootstrap.com/)
 * Copyright 2023, Author (https://github.com/jahiidh)
 * Licensed under MIT (https://github.com/jahiidh/datatable/LICENSE)
*/ class DataTable{constructor(t,e={}){let l=this;l.s=t,l.d=e.data??!1,l.c=e.content??!1,l.col=e.columns??!1,l.hx=e.hideExtra??!1,l.stk=e.sticky??!1,l.cat=e.categories??!1,l.srt=e.sort??!1,l.srtc=e.sort_columns??!1,l.srch=e.search??!1,l.pgn=e.pagination??!1,l.pgnb=e.pagination_buttons??!1,l.lmt=e.limit??!1,l.cds=e.catDesign??!1,l.clmt=e.current_limit??!1,l.tc=e.themeClass??"initial",l.so=e.search_on??!1,l.sh=e.search_heighlight??!1,l.rsp=e.responsive??!0,l.th={},l.gmcold=1,l.h()}mn=t=>{var e;let l=document.createRange().createContextualFragment(t).firstChild;for(;null!=l&&3==l.nodeType;)l=l.nextSibling;return l};pg(t,e,l){if(l<=t&&t>1){let a=Math.floor(e/2);e>t&&(e=t);let s=1;l-a>0&&(s=l-a);let r,o=[];for(r=s+e>t&&t-e+1>1?(s=t-e+1)+e:s+e;s<r;s++)s<=t&&o.push(s);return(o=o[0]>1?[l-1,"s",...o]:[l-1,...o])[o.length-1]<t?[...o,"e",parseInt(l)+1]:[...o,parseInt(l)+1]}}qa(t,e,l=document){l.querySelectorAll(t).forEach((t,l)=>e(t,l))}gmcol=()=>{let t=this;t.qa(t.s+" table",(e,l)=>{for(var a=0,l=0;l<e.rows.length;l++)a<e.rows[l].cells.length&&(a=e.rows[l].cells.length);t.gmcold=a})};clck=t=>{window.addEventListener("click",e=>{let l=this;l.qa(".dt-body",(a,s)=>{l.qa(t,(t,l)=>{if(e.target==t||t.contains(e.target))return t},a)})})};fev(){document;let t=this;window.addEventListener("click",e=>{t.qa(".dt-body .dt-sortable",(l,a)=>{(e.target==l||l.contains(e.target))&&t.qa(".dt-sortable",(e,a)=>{l==e?e.classList.contains("sorted")?(e.classList.remove("sorted"),t.dtsrt(e.closest(".dt-body"),a,"asc")):(e.classList.add("sorted"),t.dtsrt(e.closest(".dt-body"),a,"desc")):e.classList.remove("sorted")},l.closest("tr"))}),t.qa(".dt-body .dt-pagination-btn",(l,a)=>{if((e.target==l||l.contains(e.target))&&l.hasAttribute("data")){let s=l.closest(".dt-body"),r=s.querySelectorAll("tbody tr"),o=l.getAttribute("data");s.querySelector(".dt-limit")?t.clmt=s.querySelector(".dt-limit").value:t.clmt=s.querySelectorAll("tbody tr").length;let c=t.pgmk(r.length,o);t.clmt=s.querySelector(".dt-limit").value,s.querySelector(".dt-pagination").outerHTML=c;let i=s.querySelector(".dt-table tbody");t.qa("tr",(e,l)=>{(o-1)*t.clmt<=l&&l<o*t.clmt?e.classList.remove("d-none"):e.classList.add("d-none")},i),s.querySelector(".dt-info-start").innerText=0==r.length?0:(o-1)*t.clmt+1,s.querySelector(".dt-info-end").innerText=r.length<o*t.clmt?r.length:o*t.clmt,s.querySelector(".dt-info-total").innerText=r.length}}),t.qa(".dt-body .dt-catbutton",(l,a)=>{if(e.target==l||l.contains(e.target)){let s=l.getAttribute("value");l=l.closest(".dt-category"),t.qa(".dt-catbutton",(t,e)=>{t.getAttribute("value")===s?t.classList.add("active"):t.classList.remove("active")});let r=t.dtcs(l.getAttribute("data-column"),l.getAttribute("data-name"),s,l.closest(".dt-body"));l.closest(".dt-body").querySelector("tbody").replaceWith(r)}})}),window.addEventListener("input",e=>{t.qa(".dt-body .dt-category",(l,a)=>{if(e.target==l||l.contains(e.target)){let s=t.dtcs(l.getAttribute("data-column"),l.name,l.value,l.closest(".dt-body"));l.closest(".dt-body").querySelector("tbody").replaceWith(s)}}),t.qa(".dt-body .dt-search input",(l,a)=>{if(e.target==l||l.contains(e.target)){let s=t.dtcs("search","dt-default-search",l.value,l.closest(".dt-body"));l.closest(".dt-body").querySelector("tbody").replaceWith(s)}}),t.qa(".dt-body .dt-limit",(l,a)=>{(e.target==l||l.contains(e.target))&&t.dtlmt(l.closest(".dt-body"))})})}dtlmt=t=>{let e=this,l=t.querySelector(".dt-limit").value,a=document.createElement("tbody"),s=!1,r=0,o=0;e.qa("tbody tr",(t,e)=>{t.classList.contains("d-none")||(s=!0),s&&r++<l?t.classList.remove("d-none"):t.classList.add("d-none"),!t.hasAttribute("hidetype")&&o++,a.append(t)},t),e.clmt=l,e.pgmk(o,1,t),t.querySelector("tbody").replaceWith(a)};eva=t=>Array.isArray(t)?t.flatMap(t=>this.eva(t)):"object"==typeof t&&null!==t?Object.values(t).flatMap(t=>this.eva(t)):[t];dtcs=(t,e,l,a)=>{let s=this,r,o,c=!1,i=t.match(/\{column\[(\d+)\](.*)\}/);if(i){if(r=parseInt(i[1])+1,""!==i[2]&&i[2].match(/ attr\[(.*)\]/)){let n=i[2].match(/ attr\[(.*)\]/);o=i[2].replaceAll(n[0],""),c=n[1].replaceAll(/^['"]|['"]$/g,"")}else o=i[2]}let d=document.createElement("tbody"),h=0,u=1;if(a.querySelector(".dt-limit")?s.clmt=a.querySelector(".dt-limit").value:s.clmt=a.querySelectorAll("tbody tr").length,s.qa("tbody tr",(t,a)=>{let i=!1,n=[];if("dt-default-search"===e)s.qa("td",(t,e)=>{let a=s.so,r=[];if((!a||Array.isArray(a)&&0===a.length||"object"==typeof a&&0===Object.keys(a).length)&&(a="column"),a){let o;"string"==typeof a?r.push(a):a.constructor==Array?(1===a.length?o=a:a[e]&&(o=s.eva(a[e])),r=[...r,...o]):"object"==typeof a&&(a["*"]&&(o=s.eva(a["*"])),a[e]&&(o=s.eva(a[e])),r=[...r,...o]),""!==l?((r.includes("strict")&&r.includes("column")||!r.includes("strict"))&&(t.innerText.toLowerCase().match(l)?(s.sh&&t.classList.add("dt-search-highlight"),i=!0):t.classList.remove("dt-search-highlight")),r.forEach((e,a)=>{e.includes(["strict","column"])||(t.hasAttribute(e)&&(t.getAttribute(e).match(l)?(s.sh&&t.classList.add("dt-search-highlight"),i=!0):t.classList.remove("dt-search-highlight")),s.qa("["+e+"]",(t,a)=>{t.hasAttribute(e)&&(t.getAttribute(e).match(l)?(s.sh&&t.classList.add("dt-search-highlight"),i=!0):t.classList.remove("dt-search-highlight"))},t))})):(i=!0,t.classList.remove("dt-search-highlight"))}},t);else{let u=t.querySelector("td:nth-child("+r+")"+o),m;u?c?u.getAttribute(c)?m=u.getAttribute(c).toLowerCase():u.querySelector("["+c+"]")&&(m=u.querySelector("["+c+"]").getAttribute(c).toLowerCase()):m=u.innerText.toLowerCase():m="",i=m===l.toLowerCase()||""===l}if(t.hasAttribute("hidetype")){let p=t.getAttribute("hidetype").split(",");n=p=p.map(t=>t.trim())}i?n.includes(e)&&n.splice(parseInt(n.indexOf(e)),1):n.includes(e)||n.push(e),n.length>0?t.setAttribute("hidetype",n.join(", ")):(t.removeAttribute("hidetype"),h++),s.clmt>=h?t.classList.remove("d-none"):t.classList.add("d-none"),d.appendChild(t)},a),0!==d.querySelectorAll(".dt-norow").length||0===h){if(0==d.querySelectorAll(".dt-norow").length){let m=document.createElement("tr");s.gmcol(),m.innerHTML='<td colspan="'+s.gmcold+'">No Result found.</td>',m.classList.add("dt-norow"),d.appendChild(m)}else d.querySelector(".dt-norow").classList.remove("d-none"),d.querySelector(".dt-norow").removeAttribute("hidetype");0!==h&&d.querySelector(".dt-norow")&&d.querySelector(".dt-norow").remove()}else d.querySelector(".dt-norow")&&d.querySelector(".dt-norow").remove();return s.pgmk(h,u,a),d};pgmk=(t,e,l)=>{let a=this;t.length&&(t=t.length);let s=!1!==a.pgnb?a.pgnb:5,r=Math.ceil(t/(a.clmt??t)),o=a.pg(r,s,e),c='<div class="dt-pagination">';if(o){let i=o[0],n=o[o.length-1];o.splice(-1),o.splice(0,1),c+=`<button class="dt-pagination-btn" ${i>0?'data="'+i+'"':"disabled"} >Prev</button>`,o.forEach(t=>{"s"==t?c+='<button class="dt-pagination-btn" data="1">1</button>':"e"==t?c+=`<button class="dt-pagination-btn" data="${r}">${r}</button>`:c+=`<button class="dt-pagination-btn ${t==e?"active":""}" data="${t}">${t}</button>`}),c+=`<button class="dt-pagination-btn" ${n-1<r?'data="'+n+'"':"disabled"} >Next</button>`}else c+='<button class="dt-pagination-btn" disabled>Prev</button>',c+='<button class="dt-pagination-btn active" data="1">1</button>',c+='<button class="dt-pagination-btn" disabled>Next</button>';return c+="</div>",l&&l.querySelector(".dt-pagination")&&(l.querySelector(".dt-pagination").outerHTML=c,l.querySelector(".dt-info-total").innerText=t,l.querySelector(".dt-info-start").innerText=0==t?0:(e-1)*a.clmt+1,l.querySelector(".dt-info-end").innerText=t<e*a.clmt?t:e*a.clmt),c};dtsrt=(t,e,l)=>{let a=this;a.clmt=t.querySelector(".dt-limit").value;let s=t.querySelector(".dt-table tbody"),r=Array.from(s.rows),o="asc"==l?1:-1;r.sort((t,l)=>{let a=t.cells[e].textContent.trim(),s=l.cells[e].textContent.trim();return o*a.localeCompare(s)});var c=document.createElement("tbody");let i=0;for(let n of r)a.clmt>i?n.classList.remove("d-none"):n.classList.add("d-none"),c.appendChild(n),!n.hasAttribute("hidetype")&&i++;a.pgmk(i,1,t),s.replaceWith(c)};catm=(t,e)=>{let l=t.placeholder.toLowerCase().replaceAll(" ",""),a=l,s=1,r=this,o=[],c;for(r.tempcatnames||(r.tempcatnames=[]);r.tempcatnames.includes(l);)l=a+s++;if(r.tempcatnames.push(l),t.type&&"button"==t.type){c=`<div data-name="${l}" data-column="${t.column}" class="dt-category"><button class="dt-catbutton active" value="">All</button>`;let i=t.data,n=[...i.matchAll(/{data\[(\d+)\]\.value}/g)];n.forEach(t=>{e.forEach((e,l)=>{e[t[1]].split(",").forEach(t=>{o.includes(t)||(c+=`<button class="dt-catbutton" value="${t}">${t}</button>`,o.push(t))})})}),c+="</div>"}else{c=`<select name="${l}" data-column="${t.column}" class="dt-category"><option value="">${t.placeholder}</option>`;let d=t.data,h=[...d.matchAll(/{data\[(\d+)\]\.value}/g)];h.forEach(t=>{e.forEach((e,l)=>{e[t[1]].split(",").forEach(t=>{o.includes(t)||(c+=`<option value="${t}">${t}</option>`,o.push(t))})})}),c+="</select>"}return c};svgs={arrow:'<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 512 512" class="caret-down-alt"><path d="M98,190.06,237.78,353.18a24,24,0,0,0,36.44,0L414,190.06c13.34-15.57,2.28-39.62-18.22-39.62H116.18C95.68,150.44,84.62,174.49,98,190.06Z"></path></svg>'};gfc(t,e){let l=document,a=this,s=this.s,r,o=a.mn(t);if(a.d&&!1==a.c||a.d&&a.c&&"data"==a.c)r=a.d;else if(a.tempd)r=a.tempd;else{console.error("Code are changed. Plaese restore the library again.");return}a.qa("tbody tr",(t,e)=>{a.clmt&&e+1>a.clmt&&t.classList.add("d-none"),a.qa("td",(t,l)=>{let s=a.th[l];if(""!==s&&void 0!==s){s=s.replaceAll("{data.value}",t.innerHTML);let o=[...s.matchAll(/{data\[(\d+)\]\.value}/g)];o.forEach(t=>{s=s.replaceAll(t[0],r[e][t[1]])}),t.innerHTML=s}},t)},o);a.tc.split(" ").forEach(t=>{o.classList.add("dt-table",t)}),a.stk&&o.classList.add("dt-sticky"),a.n=o;let c="",i="",n="",d="";if(a.lmt){if(c+='<select class="dt-limit" name="dt_limit" >',a.lmt.constructor==Array)a.lmt.forEach(t=>{c+=`<option value="${t}" ${t==a.clmt?"selected":""}>${t}</option>`});else if("object"==typeof a.lmt)for(let h in a.lmt)"active"==h&&!1===a.clmt?(c+=`<option value="${a.lmt[h]}" selcted>${a.lmt[h]}</option>`,a.clmt=a.lmt[h]):c+=`<option value="${a.lmt[h]}" ${a.lmt[h]==a.clmt?"selcted":""}>${a.lmt[h]}</option>`;c+="</select>"}a.cat&&("array"==typeof a.cat||a.cat.constructor==Array?a.cat.forEach((t,e)=>{c+=a.catm(t,r)}):"object"==typeof a.cat&&(c+=a.catm(a.cat,r))),a.srch&&(i+='<div class="dt-search"><input type="text" placeholder="Search" /></div>'),a.srt&&a.qa("thead th",(t,e)=>{a.srtc&&a.srtc.constructor==Array?a.srtc.includes(e)&&(a.n.querySelectorAll("thead th")[e].innerHTML=`<span class="dt-sortable">${t.innerHTML}<span>${a.svgs.arrow}</span></span>`):a.n.querySelectorAll("thead th")[e].innerHTML=`<span class="dt-sortable">${t.innerHTML}<span>${a.svgs.arrow}</span></span>`},a.n),a.pgn&&(n=a.pgmk(r,1)),d+='<div class="dt-info">Showing <span class="dt-info-start">1</span> to <span class="dt-info-end">',a.clmt?(a.clmt>r.length?d+=r.length:d+=a.clmt,d+='</span> of <span class="dt-info-total">'):d+=`${r.length}</span> of <span class="dt-info-total">`,d+=`${r.length}</span> entries</div>`;var u=l.createElement("div");if(a.d&&a.c&&"data"==a.c||a.d&&!1===a.c)for(let m of l.querySelectorAll(s)[e].attributes)u.setAttribute(m.name,m.value);if(u.classList.add("dt-body"),a.n.classList.contains("dt-ultra-responsive")){let p=[];a.qa("thead th",t=>{p.push(t.innerText)},a.n),a.qa("tbody tr",t=>{a.qa("td",(t,e)=>{p[e]&&t.setAttribute("data-th",p[e])},t)},a.n)}u.innerHTML=`<div class="dt-header"><div class="d-flex"><div class="dt-filter">${c}</div>${i}</div></div><div class="dt-table-parent ${!1!==a.rsp?"dt-responsive":""}">${a.n.outerHTML}</div><div class="dt-footer"><div class="d-flex">${d}${n}</div></div>`,l.querySelectorAll(s)[e].replaceWith(u)}gt(){document;let t=this,e=this.s,l="",a=t.col;if(t.d&&!1===t.c||t.c&&"data"==t.c&&t.d){if(l+="<table><thead><tr>",!1==a&&(a=t.d[0]),a&&("array"==typeof a||a.constructor==Array))a.forEach((t,e)=>{"object"==typeof t?(t.title?l+=`<th>${t.title}</th>`:l+=`<th>${e+1}</th>`,t.html?this.th[e]=t.html:this.th[e]=""):["string","number"].includes(typeof t)?(""==t&&(t="Col "+(e+1)),l+=`<th>${t}</th>`,this.th[e]=""):"array"==typeof t?(t[0]&&(l+=`<th>${t[0]}</th>`),t[1]?this.th[e]=t.html:this.th[e]=""):(console.log(typeof t),console.error("Columns type mismatch. Read the documentation again."))});else if(a&&"object"==typeof a)for(let s in a)["string","number"].includes(typeof a[s])?(l+=`<th>${a[s]}</th>`,t.th[s]=""):"array"==typeof a[s]?a[s][1]?(l+=`<th>${a[s][0]}</th>`,t.th[s]=a[s][1]):a[s][0]?(l+=`<th>${a[s][0]}</th>`,t.th[s]=""):(l+=`<th>Col ${s+1}</th>`,t.th[s]=""):"object"==typeof a[s]?(a[s].title?l+=`<th>${a[s].title}</th>`:l+=`<th>Col ${s+1}</th>`,a[s].html?t.th[s]=a[s].html:t.th[s]=""):console.error("columns item must be object and key name must be html");l+="</tr></thead><tbody>",t.d.forEach((e,a)=>{"string"==typeof e||["string","number"].includes(typeof e)?e=[e]:"object"==typeof e&&e.constructor!==Array&&console.error("Data type must be array"),l+="<tr>",e.forEach((e,a)=>{a<Object.keys(t.th).length?l+=`<td>${e}</td>`:t.hx&&(l+=`<td class="d-none">${e}</td>`)}),l+="</tr>"}),l+="</tbody></table>",t.qa(e,(e,a)=>{t.gfc(l,a)})}else if(t.c&&"table"==t.c||!1===t.d){let r=0;t.qa(e,(e,l)=>{if("table"===e.tagName.toLowerCase()){if(r++,a&&"array"==typeof a)a.forEach((t,l)=>{"object"==typeof t?(t.title&&(e.querySelectorAll("th")[l].innerHTML=t.title),t.html?this.th[l]=t.html:this.th[l]=""):["string","number"].includes(typeof t)?this.th[l]=t:"array"==typeof t?(t[1]&&(e.querySelectorAll("th")[l].innerHTML=t[0],this.th[l]=t[1]),t[0]?this.th[l]=t[0]:this.th[l]=""):this.th[l]=""});else if(a&&"object"==typeof a)for(let s in a)["string","number"].includes(typeof a[s])?t.th[s]=a[s]:"array"==typeof a[s]?a[s][1]?(e.querySelectorAll("th")[s].innerHTML=a[s][0],t.th[s]=a[s][0]):a[s][0]?t.th[s]=a[s][0]:t.th[s]="":"object"==typeof a[s]?(a[s].title&&(e.querySelectorAll("th")[s].innerHTML=a[s].title),a[s].html?t.th[s]=a[s].html:t.th[s]=""):t.th[s]="";t.tempd=[],t.qa("tbody tr",(e,l)=>{let a=[];t.qa("td",(t,e)=>{a.push(t.innerHTML)},e),t.tempd.push(a)},e),t.gfc(e.outerHTML,l)}}),0==r&&console.error("No Table found.")}}h=()=>{this.gt(),this.qa(this.s,t=>{t.style.display=null}),this.fev()}}